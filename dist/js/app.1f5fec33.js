(function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,i=1;i<s.length;i++){var l=s[i];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={app:0},r=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},1:function(e,t){},2513:function(e,t,s){"use strict";s("fd4e")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},r=[],o=(s("034f"),s("2877")),i={},l=Object(o["a"])(i,n,r,!1,null,null,null),c=l.exports,u=(s("45fc"),s("b0c0"),s("8c4f")),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-navbar",{attrs:{id:"chat-navbar",toggleable:"md",type:"dark",variant:"info"}},[s("b-navbar-brand",{attrs:{href:"#"}},[e._v(" Welcome to 20 the Questions Game ")]),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-text",[e._v(e._s(e.user.firstname)+" | ")]),s("b-nav-item",{attrs:{active:""},on:{click:e.logUserOut}},[e._v("Logout")])],1)],1),s("section",[s("div",{staticClass:"container",attrs:{id:"text"}},[s("b-card-text",[e._v("Guess any generic word, for example "),s("b",[e._v("Animal")]),e._v(", Now start playing!!!")]),s("div",{staticClass:"row",attrs:{id:"text"}},[s("div",{staticClass:"col-lg-6 offset-lg-3 col-sm-10 offset-sm-1"},[s("form",{staticClass:"text-center border border-primary p-5",staticStyle:{"margin-top":"70px",height:"auto","padding-top":"100px !important"},on:{submit:function(t){return t.preventDefault(),e.submitGuess(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.submit.guess,expression:"submit.guess"}],staticClass:"form-control mb-5",attrs:{type:"guess",id:"guess",placeholder:"guess a word"},domProps:{value:e.submit.guess},on:{input:function(t){t.target.composing||e.$set(e.submit,"guess",t.target.value)}}}),s("center",[s("button",{staticClass:"btn btn-primary btn-block w-75 my-4",attrs:{large:""},on:{click:e.submitGuess}},[e._v(" Start Game! ")])])],1)])])],1)])],1)},d=[],g=s("48ac"),p=s.n(g),v={data:function(){return{submit:{guess:""},adminMessage:!0}},methods:{getUserDetails:function(){var e=localStorage.getItem("user"),t=p.a.decode(e);console.log(t),this.user=t},submitGuess:function(e){e.preventDefault(),console.log(this.user.email,this.submit.guess),this.$store.dispatch("SET_GUESS",this.submit.guess),this.$router.push("/chat/player1")},logUserOut:function(){localStorage.removeItem("user"),this.$router.push("/login")}},created:function(){this.getUserDetails()},mounted:function(){}},f=v,h=(s("ee90"),Object(o["a"])(f,m,d,!1,null,null,null)),b=h.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-md-6 col-md-8"},[s("Chat")],1)])])])},S=[],y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-dashboard"},[s("ChatNavBar"),s("div",{staticClass:"card mt-3"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-body"},[s("span",[s("b",[e._v("Guess Count: ")]),e._v(e._s(e.countdown)+" ")]),s("initializeConvo",{attrs:{name:this.user.firstname}}),e._l(e.messages,(function(t){return s("div",{key:t.message,staticClass:"messages"},[s("p",[s("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.data.user)+": ")]),"Yes"===t.data.message?s("span",[e._v(" Hey, the game has ended as you have made the correct guess...!!!CONGRATULATIONS!!! ")]):s("span",[e._v(" "+e._s(t.data.message)+" : ")]),s("span",[e._v(" "+e._s(e._f("moment")(new Date,"h:mm a"))+" ")])])])}))],2)]),s("div",{staticClass:"card-footer"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[s("div",{staticClass:"gorm-group pb-3"},[e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter a guess..."},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),s("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:e.clickable}},[e._v(" Send ")])])])])],1)},w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{attrs:{for:"message"}},[s("h4",[e._v("Enter a Guess:")])])}],C=(s("99af"),s("a9e3"),s("2909")),E=s("8055"),x=s.n(E),O=null;function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(O&&!e)return O;var t=localStorage.getItem("user");return console.log(t,"token"),O=x()("localhost:3000",{reconnection:!0,autoConnect:!!t,reconnectionDelay:5e3,reconnectionFactor:5e3,transports:["websocket","polling"],query:{token:t}}),O.on("reconnect_attempt",(function(){var e=localStorage.getItem("user");O.io.opts.query={token:e}})),window.socket=O,O}var M=k,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-navbar",{attrs:{id:"chat-navbar",toggleable:"md",type:"dark",variant:"info"}},[s("b-navbar-brand",{attrs:{href:"#"}},[e._v(" You are currently playing the 20 Questions Game ")]),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-text",[e._v(e._s(e.user.firstname)+" | ")]),s("b-nav-item",{attrs:{active:""},on:{click:e.logUserOut}},[e._v("Logout")])],1)],1)},G=[],U={data:function(){return{}},methods:{getUserDetails:function(){var e=localStorage.getItem("user"),t=p.a.decode(e);console.log(t,"----------"),this.user=t},logUserOut:function(){localStorage.removeItem("user"),this.$router.push("/login")}},created:function(){this.getUserDetails()}},A=U,N=(s("2513"),Object(o["a"])(A,$,G,!1,null,null,null)),D=N.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"messages"},[s("p",[s("span",{staticClass:"font-weight-bold"},[s("span",[s("b",[e._v(e._s(e.name))]),e._v(", now that the game has started, "),s("b",[e._v("you can make a guess!!")]),e._v(" Have some fun doing so!! ")]),e._v(" "+e._s(e._f("moment")(new Date,"h:mm a"))+" ")])])])},j=[],R={props:["name"],data:function(){return{}},methods:{created:function(){}}},P=R,I=Object(o["a"])(P,T,j,!1,null,null,null),H=I.exports,q=M(),L={name:"Chat",data:function(){return{user:"",message:"",messages:this.$store.getters.MESSAGE,adminMessage:!1,countdown:Number(20),room:this.$store.getters.ROOM}},components:{ChatNavBar:D,initializeConvo:H},created:function(){this.getUserDetails(),this.messages=this.$store.getters.MESSAGE},methods:{getUserDetails:function(){var e=localStorage.getItem("user"),t=p.a.decode(e);console.log(t,"-----------"),this.user=t},checkAdminResponse:function(){return"Yes"===this.messages.data.message&&(alert("Hey ".concat(this.user.firstname,", the game has ended as you have made the correct guess...!!!CONGRATULATIONS!!!")),!0)},sendMessage:function(e){e.preventDefault(),this.$store.dispatch("SET_MESSAGE",{messages:this.messages,adminMessage:this.adminMessage}),q.emit("SEND_MESSAGE",{user:this.user.firstname,message:this.message,adminMessage:this.adminMessage,created:Date.now()}),this.message="",this.countdown--}},mounted:function(){var e=this,t=M();t.on("MESSAGE",(function(t){e.messages=[].concat(Object(C["a"])(e.messages),[t])}))},computed:{clickable:function(){return console.log(this.messages,"messages"),0===this.countdown?(alert("Hey ".concat(this.user.firstname,", the game has ended and you have not made the correct guess!!!")),!0):(this.messages&&this.messages.length,!1)}}},Q=L,W=Object(o["a"])(Q,y,w,!1,null,null,null),Y=W.exports,z={name:"app",components:{Chat:Y}},B=z,J=Object(o["a"])(B,_,S,!1,null,null,null),F=J.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-navbar",{attrs:{id:"chat-navbar",toggleable:"md",type:"dark",variant:"info"}},[s("b-navbar-brand",{attrs:{href:"#"}},[e._v(" You are currently playing the 20 Questions Game ")]),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-text",[e._v(e._s(e.user.firstname)+" | ")]),s("b-nav-item",{attrs:{active:""},on:{click:e.logUserOut}},[e._v("Logout")])],1)],1),s("span",{attrs:{slot:"activator"},slot:"activator"},[s("p",{staticClass:"grey--text text--darken-2"},[s("b",{staticClass:"indigo--text"},[e._v(e._s(e.user.firstname)+", you have guessed the word: "+e._s(e.guess))])]),s("router-link",{attrs:{to:"/login?redirect?url=/chat"}},[e._v("Now you can share this link to Player 2 to start playing!")]),s("div",{attrs:{id:"app"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-md-6 col-md-8"},[s("Chat")],1)])])])],1)],1)},V=[],X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-dashboard"},[s("div",{staticClass:"card mt-3"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-body"},[e.adminMessage?s("div",e._l(e.options,(function(t,a){return s("div",{key:a,staticClass:"messages"},[s("p",[s("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.data.user)+" ")]),s("span",[e._v(" "+e._s(t.data.message)+" ")]),s("span",[e._v(" "+e._s(e._f("moment")(new Date,"h:mm a"))+" ")])])])})),0):e._e()])]),s("div",{staticClass:"card-footer"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[s("h3",[e._v("Is the Guess correct?")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?s:s[0]}}},[s("option",{attrs:{disabled:"",value:""}},[e._v("Please select one")]),s("option",[e._v("Yes")]),s("option",[e._v("No")])]),s("br"),s("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:e.clickable}},[e._v(" Send ")])])])])])},Z=[],ee={name:"Chat",data:function(){return{user:"",messages:[],selected:"",options:[],adminMessage:!0,message:this.$store.getters.MESSAGE}},components:{},created:function(){this.getUserDetails()},computed:{getMessage:function(){return this.$store.getters.MESSAGE},clickable:function(){return(!this.options.length||0===this.options.length)&&(alert("Hey ".concat(this.user.firstname,", allow the player 2 to make a guess before proceeding to confirm!!")),!0)}},methods:{getUserDetails:function(){var e=localStorage.getItem("user"),t=p.a.decode(e);console.log(t,"-----------"),this.user=t},sendMessage:function(e){var t=M();e.preventDefault(),this.$store.dispatch("SET_MESSAGE",{options:this.options,adminMessage:this.adminMessage}),t.emit("SEND_MESSAGE",{user:this.user.firstname,message:this.selected,adminMessage:this.adminMessage}),this.selected=""}},mounted:function(){var e=this,t=M();t.on("MESSAGE",(function(t){e.options=[].concat(Object(C["a"])(e.options),[t]),console.log(e.options,"check options array")}))}},te=ee,se=Object(o["a"])(te,X,Z,!1,null,null,null),ae=se.exports,ne={components:{Chat:ae},data:function(){return{guess:this.$store.getters.GUESS}},methods:{isMyGuess:function(){var e=this.$store.getters.GUESS;return console.log(e,"guess"),e},getUserDetails:function(){var e=localStorage.getItem("user"),t=p.a.decode(e);console.log(t),this.user=t},logUserOut:function(){localStorage.removeItem("user"),this.$router.push("/login")}},created:function(){this.isMyGuess(),this.getUserDetails()}},re=ne,oe=Object(o["a"])(re,K,V,!1,null,null,null),ie=oe.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("login")],1)},ce=[],ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("b-card",{staticClass:"text-center",attrs:{"bg-variant":"dark",header:"The 20 Questions Game","text-variant":"white"}},[s("b-card-text",[e._v("Already have an account? Login to begin playing!")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6 offset-lg-3 col-sm-10 offset-sm-1"},[s("form",{staticClass:"text-center border border-primary p-5",staticStyle:{"margin-top":"70px",height:"auto","padding-top":"100px !important"},on:{submit:function(t){return t.preventDefault(),e.loginUser(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.login.email,expression:"login.email"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"email",placeholder:"Email"},domProps:{value:e.login.email},on:{input:function(t){t.target.composing||e.$set(e.login,"email",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],staticClass:"form-control mb-5",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value)}}}),s("p",[e._v(" Dont have an account? Click "),s("router-link",{attrs:{to:"/register"}},[e._v(" here ")]),e._v(" to sign up ")],1),s("center",[s("button",{staticClass:"btn btn-primary btn-block w-75 my-4",attrs:{type:"submit"}},[e._v(" Sign in ")])])],1)])])],1)],1)},me=[],de=(s("ac1f"),s("5319"),s("841c"),s("1276"),s("96cf"),s("1da1")),ge={data:function(){return{login:{email:"",password:""},connections:0}},methods:{loginUser:function(){var e=this;return Object(de["a"])(regeneratorRuntime.mark((function t(){var s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/auth/login",e.login);case 3:s=t.sent,console.log(s,"--------"),a=s.data.data.token,localStorage.setItem("user",a),n=window.location.search.split("url=")[1],console.log(n),n?window.location.replace(decodeURIComponent(n)):e.$router.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0.response);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}},pe=ge,ve=Object(o["a"])(pe,ue,me,!1,null,null,null),fe=ve.exports,he={components:{login:fe}},be=he,_e=Object(o["a"])(be,le,ce,!1,null,null,null),Se=_e.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register"},[s("register")],1)},we=[],Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("b-card",{staticClass:"text-center",attrs:{"bg-variant":"dark",header:"Welcome to the 20 Questions Game","text-variant":"white"}},[s("b-card-text",[e._v("Register to play!")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6 offset-lg-3 col-sm-10 offset-sm-1"},[s("form",{staticClass:"text-center border border-primary p-5",staticStyle:{"margin-top":"70px",height:"auto","padding-top":"100px !important"},on:{submit:function(t){return t.preventDefault(),e.registerUser(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.register.firstName,expression:"register.firstName"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"firstName",placeholder:"firstName",required:""},domProps:{value:e.register.firstName},on:{input:function(t){t.target.composing||e.$set(e.register,"firstName",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.register.lastName,expression:"register.lastName"}],staticClass:"form-control mb-5",attrs:{type:"text",id:"lastName",placeholder:"lastName",required:""},domProps:{value:e.register.lastName},on:{input:function(t){t.target.composing||e.$set(e.register,"lastName",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.register.email,expression:"register.email"}],staticClass:"form-control mb-5",attrs:{type:"email",id:"email",placeholder:"Email",required:""},domProps:{value:e.register.email},on:{input:function(t){t.target.composing||e.$set(e.register,"email",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.register.password,expression:"register.password"}],staticClass:"form-control mb-5",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:e.register.password},on:{input:function(t){t.target.composing||e.$set(e.register,"password",t.target.value)}}}),s("p",[e._v(" Already have an account? Click "),s("router-link",{attrs:{to:"/login"}},[e._v("here")]),e._v(" to sign in "),s("center",[s("button",{staticClass:"btn btn-primary btn-block w-75 my-4",attrs:{type:"submit"}},[e._v(" Sign up ")])])],1)])])])],1)],1)},Ee=[],xe={data:function(){return{register:{firstName:"",lastName:"",email:"",password:""}}},methods:{registerUser:function(){var e=this;return Object(de["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/auth/signup",e.register);case 3:s=t.sent,console.log(s),s?(e.$router.push("/login"),console("Success","Registration Was successful","success")):console.log("Error","Something Went Wrong","error"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),a=t.t0.response,console.log(a);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Oe=xe,ke=Object(o["a"])(Oe,Ce,Ee,!1,null,null,null),Me=ke.exports,$e={components:{register:Me}},Ge=$e,Ue=Object(o["a"])(Ge,ye,we,!1,null,null,null),Ae=Ue.exports;a["default"].use(u["a"]);var Ne=[{path:"/",name:"home",component:b,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Se},{path:"/register",name:"register",component:Ae},{path:"/chat/player1",name:"chatAdmin",component:ie,meta:{requiresAuth:!0}},{path:"/chat",name:"chat",component:F,meta:{requiresAuth:!0}}],De=new u["a"]({mode:"history",routes:Ne});De.beforeEach((function(e,t,s){if(e.name===t.name)return s();s(),e.matched.some((function(e){return e.meta.requiresAuth}))&&null==localStorage.getItem("user")?s({path:"/login"}):s()}));var Te=De,je=s("bc3a"),Re=s.n(je),Pe=s("123d"),Ie=s.n(Pe),He=s("5f5b"),qe=(s("f9e3"),s("2dd8"),s("2f62"));a["default"].use(qe["a"]);var Le=new qe["a"].Store({state:{messages:[],guess:"",room:"",user:"",allUsers:[],adminUserEmail:"",message:""},getters:{CHATS:function(e){return e.chats},GUESS:function(e){return e.guess},USERS:function(e){return e.user},MESSAGE:function(e){return e.message},ROOM:function(e){return e.room}},mutations:{SET_CHAT:function(e,t){e.chats=t},ADD_CHAT:function(e,t){e.chats.push(t)},SET_GUESS:function(e,t){e.guess=t},SET_USER:function(e,t){e.user=t},SET_MESSAGE:function(e,t){e.message=t},SET_ROOM:function(e,t){e.room=t}},actions:{ADD_CHAT:function(e,t){e.commit("ADD_CHAT",t)},SET_GUESS:function(e,t){e.commit("SET_GUESS",t)},SET_USER:function(e,t){e.commit("SET_USER",t)},SET_MESSAGE:function(e,t){e.commit("SET_MESSAGE",t)},SET_ROOM:function(e,t){e.commit("SET_ROOM",t)}}}),Qe=Re.a.create({baseURL:"http://localhost:3000/api/v1"});a["default"].config.productionTip=!1,a["default"].use(He["a"]),a["default"].use(Ie.a),a["default"].use(s("2ead")),a["default"].prototype.$http=Qe,new a["default"]({store:Le,router:Te,render:function(e){return e(c)}}).$mount("#app")},"85ec":function(e,t,s){},e2c1:function(e,t,s){},ee90:function(e,t,s){"use strict";s("e2c1")},fd4e:function(e,t,s){}});
//# sourceMappingURL=app.1f5fec33.js.map